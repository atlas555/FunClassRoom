<div class="modal fade" id="courseConsumptionModal" tabindex="-1" aria-labelledby="courseConsumptionModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="courseConsumptionModalLabel">课消记录</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="consumptionStudentId">
        
        <!-- 上部分：添加课消记录 -->
        <div class="mb-4">
          <h6 class="border-bottom pb-2 mb-3">新增课消记录</h6>
          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label">学生姓名</label>
              <input type="text" class="form-control" id="consumptionStudentName" readonly>
            </div>
          </div>
          
          <!-- 课时包选择区域 -->
          <div class="row mb-3">
            <div class="col-md-12" id="packageSelector">
              <label class="form-label">选择课时包 <span class="text-danger">*</span></label>
              <select class="form-select" id="consumptionPackageId">
                <option value="">正在加载课时包...</option>
              </select>
            </div>
          </div>
          
          <!-- 课时包信息展示 -->
          <div class="row mb-3" id="selectedPackageInfo">
            <div class="col-md-4">
              <label class="form-label">课时包总课时</label>
              <input type="number" class="form-control" id="consumptionTotalHours" readonly>
            </div>
            <div class="col-md-4">
              <label class="form-label">已消耗课时</label>
              <input type="number" class="form-control" id="consumptionUsedHours" readonly>
            </div>
            <div class="col-md-4">
              <label class="form-label">剩余课时</label>
              <input type="number" class="form-control" id="consumptionRemainingHours" readonly>
            </div>
          </div>
          
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="consumptionHours" class="form-label">本次消耗课时 <span class="text-danger">*</span></label>
              <input type="number" class="form-control" id="consumptionHours" min="0.5" step="0.5" value="1" required>
            </div>
          </div>
          <div class="d-flex justify-content-end">
            <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">取消</button>
            <button type="button" class="btn btn-primary" id="saveConsumptionBtn">保存课消记录</button>
          </div>
        </div>
        
        <!-- 下部分：课消记录历史 -->
        <div>
          <h6 class="border-bottom pb-2 mb-3">历史课消记录</h6>
          <div class="table-responsive">
            <table class="table table-hover table-sm">
              <thead>
                <tr>
                  <th scope="col">消耗课时</th>
                  <th scope="col">消耗后剩余</th>
                  <th scope="col">操作时间</th>
                  <th scope="col">操作人</th>
                </tr>
              </thead>
              <tbody id="consumptionRecordsList">
                <!-- 课消记录将通过JavaScript动态加载 -->
                <tr id="noConsumptionRecordsMessage">
                  <td colspan="4" class="text-center text-muted py-3">暂无课消记录</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 